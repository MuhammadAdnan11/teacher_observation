<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

<style>
  * {
    box-sizing: border-box;
  }

  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #f9f9f9;
    margin: 0;
    padding: 0;
  }

  h2, h3 {
    text-align: center;
    color: #333;
    margin-top: 10px;
  }

  .container {
    max-width: 1000px;
    margin: 30px auto;
    padding: 20px 30px;
    background: white;
    border-radius: 12px;
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
  }

  form {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .details {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 15px;
  }

  input[type="text"],
  input[type="date"],
  input[type="time"],
  select,
  textarea {
    padding: 10px 12px;
    font-size: 14px;
    border: 1px solid #ccc;
    border-radius: 8px;
    transition: border-color 0.3s;
    width: 100%;
  }

  input:focus,
  select:focus,
  textarea:focus {
    border-color: #1976d2;
    outline: none;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    background-color: #fff;
    margin-top: 10px;
  }

  th, td {
    border: 1px solid #ddd;
    padding: 10px;
    vertical-align: top;
    text-align: left;
  }

  th {
    background-color: #1976d2;
    color: white;
  }

  td input[type="radio"] {
    margin-right: 4px;
    margin-left: 4px;
  }

  .final-section {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .final-section label {
    font-weight: 500;
  }

  textarea {
    height: 80px;
    resize: vertical;
  }

  .btn-group {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-top: 20px;
  }

  button {
    padding: 10px 20px;
    background-color: #1976d2;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 500;
    transition: background-color 0.3s;
  }

  button:hover {
    background-color: #125aa3;
  }

  .total-score {
    text-align: center;
    font-weight: bold;
    font-size: 16px;
    background: #e3f2fd;
    padding: 10px;
    border-radius: 6px;
    color: #1976d2;
  }

  nav a:hover {
    text-decoration: underline;
  }

  @media (max-width: 600px) {
    .btn-group {
      flex-direction: column;
    }

    nav {
      flex-direction: column;
      align-items: flex-start;
    }

    nav a {
      margin-bottom: 8px;
    }
  }
</style>


</head>
<body>

  <!-- Navbar -->
  <nav style="background-color: #1976d2; padding: 10px 20px; display: flex; align-items: center; justify-content: space-between;">
    <div style="display: flex; align-items: center; gap: 10px;">
      <img src="logo.jpg" alt="GIMS Logo" style="height: 50px;">
      <span style="color: white; font-size: 20px; font-weight: bold;">GIMS Peshawar</span>
    </div>
    <div>
      <a href="#" style="color: white; margin-right: 20px; text-decoration: none;">Home</a>
      <a href="#" style="color: white; text-decoration: none;">Records</a>
    </div>
  </nav>

  <div class="container" id="formContainer">
    <h2>Ghazzali Institute of Medical Sciences Peshawar</h2>
    <h3>Teacher Demonstration Evaluation Form</h3>

    <form id="evaluationForm">
      <div class="details">
        <!-- New Fields -->
        <select id="categorySelect" required>
          <option value="">Select Category</option>
          <option value="diploma">Diploma Teacher</option>
          <option value="nursing">Nursing Teacher</option>
        </select>
        <select id="teacherSelect" required>
          <option value="">Select Teacher</option>
        </select>
        <input type="text" id="name" placeholder="Teacher Name" readonly>
        <input type="text" id="teacherID" placeholder="Teacher ID" readonly>

        <!-- Old Fields -->
        <input type="text" id="topic" placeholder="Topic of Demo" required>
        <input type="text" id="length" placeholder="Length of Demo">
        <input type="text" id="conducted" placeholder="Conducted by">
        <input type="date" id="date">
        <input type="time" id="time">
      </div>

      <p><strong>Rating Key:</strong> 1=Unsatisfactory, 2=Fair, 3=Satisfactory, 4=Very Good, 5=Excellent</p>

      <table>
        <thead>
          <tr>
            <th>Attribute</th>
            <th>Rating</th>
            <th>Comments (if any)</th>
          </tr>
        </thead>
        <tbody id="criteriaTable"></tbody>
      </table>

      <div class="final-section">
        <label><input type="radio" name="recommend" value="Recommended" required> Recommended</label>
        <label><input type="radio" name="recommend" value="Not Recommended"> Not Recommended</label>
        <textarea id="additionalComments" placeholder="Additional Comments"></textarea>
      </div>

      <div class="total-score" id="totalScore">Total Score: 0 | Average: 0</div>

      <div class="btn-group">
        <button type="submit">Save to LocalStorage</button>
        <button type="button" onclick="printForm()">Print</button>
        <button type="button" onclick="downloadPDF()">Download PDF</button>
      </div>
    </form>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <script>
    const teachers = {
      diploma: [
        { id: "D001", name: "Mr. Aslam" },
        { id: "D002", name: "Ms. Fatima" }
      ],
      nursing: [
        { id: "N001", name: "Dr. Hina" },
        { id: "N002", name: "Mr. Saad" }
      ]
    };

    const categorySelect = document.getElementById('categorySelect');
    const teacherSelect = document.getElementById('teacherSelect');
    const nameInput = document.getElementById('name');
    const idInput = document.getElementById('teacherID');

    categorySelect.addEventListener('change', function () {
      teacherSelect.innerHTML = '<option value="">Select Teacher</option>';
      const selected = teachers[this.value] || [];
      selected.forEach(teacher => {
        const option = document.createElement('option');
        option.value = teacher.id;
        option.textContent = teacher.name;
        option.dataset.name = teacher.name;
        teacherSelect.appendChild(option);
      });
    });

    teacherSelect.addEventListener('change', function () {
      const selectedOption = this.options[this.selectedIndex];
      nameInput.value = selectedOption.dataset.name || '';
      idInput.value = this.value || '';
    });

    const criteria = [ /* your existing 24 criteria here */ 
      "Introduction (given of both self and topic)",
      "Dress, neatness and appearance",
      "Writing on the board. Fingers/diagram/visual aids",
      "Usage of classroom language",
      "Circulated during class to check all the students",
      "Eye contact with students",
      "Gesture and Posture",
      "Spoke loudly and clearly",
      "Communication (language, choice of words, grammar and fluency)",
      "Encourage students to ask questions",
      "Aroused students interest and encourage them for participation",
      "Used words and expressions within the student level of understanding",
      "Was there any element of creativity (e.g., examples)",
      "Subject matter knowledge / command on subject / topic",
      "Presented subject matter clearly and systematically",
      "Aptitude ability skill and talent displayed",
      "Methodology taught for students understanding",
      "Answered the questions",
      "Class control",
      "Time management",
      "Was organized one",
      "Conclusion / summarization made or lecture abruptly ended",
      "Confidence level exhibited",
      "Showed dynamism and enthusiasm"
    ];

    const tableBody = document.getElementById('criteriaTable');

    criteria.forEach((item, index) => {
      const row = document.createElement('tr');
      const attrCell = document.createElement('td');
      attrCell.textContent = item;
      row.appendChild(attrCell);

      const ratingCell = document.createElement('td');
      for (let i = 1; i <= 5; i++) {
        const radio = document.createElement('input');
        radio.type = 'radio';
        radio.name = `rating-${index}`;
        radio.value = i;
        radio.required = true;
        radio.onchange = calculateScore;
        ratingCell.appendChild(radio);
        ratingCell.append(i);
      }
      row.appendChild(ratingCell);

      const commentCell = document.createElement('td');
      const commentInput = document.createElement('input');
      commentInput.type = 'text';
      commentInput.placeholder = "Optional";
      commentInput.style.width = "100%";
      commentCell.appendChild(commentInput);
      row.appendChild(commentCell);

      tableBody.appendChild(row);
    });

    function calculateScore() {
      let total = 0, count = 0;
      criteria.forEach((_, index) => {
        const selected = document.querySelector(`input[name='rating-${index}']:checked`);
        if (selected) {
          total += parseInt(selected.value);
          count++;
        }
      });
      const avg = count > 0 ? (total / count).toFixed(2) : 0;
      document.getElementById('totalScore').textContent = `Total Score: ${total} | Average: ${avg}`;
    }

    document.getElementById('evaluationForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const formData = new FormData(e.target);
      const entries = {};
      formData.forEach((value, key) => entries[key] = value);
      localStorage.setItem('teacherObservation-' + entries.teacherID, JSON.stringify(entries));
      alert('Form saved to localStorage!');
    });

    function printForm() {
      window.print();
    }

    function downloadPDF() {
      const element = document.getElementById('formContainer');
      html2pdf().from(element).save("Teacher-Evaluation.pdf");
    }
  </script>


</body>
</html>